/* sidebar view button icons */
#sidebarMenu-popup > .webextension-menuitem > .toolbarbutton-icon {
    opacity: 0.8 !important;
    fill: currentColor !important;
}

#sidebarMenu-popup
    #button__446900e4-71c2-419f-a6a7-df9c091e268b_-sidebar-action
    .toolbarbutton-icon {
    list-style-image: url(chrome://userchrome/content/notifications/webauthn.svg) !important;
}

#sidebar-box[sidebarcommand="_446900e4-71c2-419f-a6a7-df9c091e268b_-sidebar-action"]
    #sidebar-switcher-target
    > #sidebar-icon {
    fill: currentColor !important;
    --webextension-menuitem-image-2x: url(chrome://userchrome/content/notifications/webauthn.svg) !important;
}

#sidebar,
#sidebar-search-container,
#historyTree {
    appearance: none !important;
    --sidebar-background-color: var(--toolbar-bgcolor) !important;
    --sidebar-text-color: var(--toolbar-color) !important;
    background-color: var(--ui-secondary-bg) !important;
    color: var(--toolbar-color) !important;
}

#sidebar-header {
    appearance: none !important;
    padding: 7px !important;
    border-bottom: 0px solid transparent !important;
    background-color: var(--ui-secondary-bg) !important;
    color: #fff !important;
}

#sidebar-search-container {
    padding-top: 1px !important;
}

.sidebar-search-container .tabsFilter {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

#sidebar-search-container #search-box,
.sidebar-search-container .tabsFilter {
    appearance: none !important;
    padding-inline-start: 5px !important;
    background-color: var(--search-box-color) !important;
    border-radius: 3px !important;
    padding-block: 0 !important;
    transition: 300ms !important;
    color: currentColor !important;
    min-height: 25px !important;
}

.sidebar-search-container .search-box,
.sidebar-search-container .tabsFilter {
    padding-inline-start: 5px !important;
    background-color: var(--search-box-color) !important;
    transition: 300ms background-color !important;
}

.sidebar-search-container .search-box .textbox-input-box {
    padding-inline-start: 13px !important;
}

/* search-textbox icons (magnifying glass and clear input button) */
@-moz-document url("chrome://browser/content/browser.xhtml"), regexp(".*Sidebar.*"), regexp(".*sidebar.*")
{
    .textbox-search-icons {
        display: flex;
        flex-flow: row nowrap;
        align-items: center;
    }

    .textbox-search-clear {
        list-style-image: url(chrome://userchrome/content/textbox-clear.svg) !important;
        fill: var(--ui-text-80) !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill-opacity: 0 !important;
        width: 16.5px !important;
        height: 16.5px !important;
        min-height: 1px !important;
        border-radius: 100% !important;
        margin: 0 3px 0 0 !important;
        padding: 0 !important;
    }

    .textbox-search-clear:is(:hover, :active) {
        fill: rgba(255, 255, 255, 1) !important;
        background-color: var(--arrowpanel-dimmed-further) !important;
    }

    .textbox-search-sign {
        margin-left: 2px !important;
        margin-top: 0.5px !important;
        margin-inline-end: 6px !important;
        -moz-context-properties: fill, fill-opacity;
        list-style-image: url(chrome://userchrome/content/textbox-search.svg) !important;
        fill: var(--panel-shortcut-color) !important;
        fill-opacity: 1;
    }

    link[href="chrome://global/skin/search-textbox.css"] ~ input::placeholder
    {
        opacity: 1;
        color: var(--panel-shortcut-color);
    }
}

#sidebar-search-container #search-box:focus-within,
.sidebar-search-container :is(.tabsFilter, .search-box):focus-within {
    background-color: var(--search-box-focus) !important;
    transition: 300ms background-color !important;
}

#sidebar-search-container #search-box :is(input, textarea) {
    background: none !important;
    color: #fff !important;
    transition: 300ms !important;
}

#viewButton:hover {
    background-color: var(--arrowpanel-dimmed) !important;
}

#viewButton:is(:active, [open]) {
    background-color: var(--arrowpanel-dimmed-further) !important;
}

#sidebar-switcher-target:-moz-focusring,
#sidebar-close:-moz-focusring {
    outline: unset !important;
}

#sidebar-switcher-target:is(:hover, :focus-visible) {
    background: var(--arrowpanel-dimmed) !important;
}

#sidebar-switcher-target.active {
    background: var(--arrowpanel-dimmed-further) !important;
}

#sidebar-close {
    width: 26.667px !important;
    height: 26.667px !important;
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
}

#sidebar-close .toolbarbutton-icon {
    width: 18px !important;
    height: auto !important;
}

#sidebar-close:is(:hover, :focus-visible) {
    background-color: var(--arrowpanel-dimmed) !important;
}

#sidebar-close:is(:hover, :focus-visible):active {
    background-color: var(--arrowpanel-dimmed-further) !important;
}

.sidebar-panel treechildren::-moz-tree-row(selected),
.sidebar-panel treechildren::-moz-tree-cell(selected) {
    background-color: var(--places-cell-focus-bgcolor) !important;
    outline: none !important;
    border: none !important;
}

.sidebar-panel treechildren::-moz-tree-row(hover),
.sidebar-panel treechildren::-moz-tree-cell(hover),
.sidebar-panel treechildren::-moz-tree-row(selected, hover),
.sidebar-panel treechildren::-moz-tree-cell(selected, hover) {
    background-color: var(--places-cell-hover-bgcolor) !important;
    color: var(--lwt-text-color) !important;
    outline: none !important;
}

.sidebar-panel:-moz-window-inactive treechildren::-moz-tree-row(selected),
.sidebar-panel:-moz-window-inactive treechildren::-moz-tree-cell(selected) {
    background-color: transparent !important;
}

.sidebar-panel:-moz-window-inactive treechildren::-moz-tree-row(selected, hover),
.sidebar-panel:-moz-window-inactive treechildren::-moz-tree-cell(selected, hover) {
    background-color: var(--places-cell-hover-bgcolor) !important;
    color: var(--lwt-text-color) !important;
    outline: none !important;
}

.sidebar-panel .sidebar-placesTree {
    background-color: var(--ui-secondary-bg) !important;
}

/* .panel-arrow {
    stroke: var(--arrowpanel-background) !important;
} */

treechildren::-moz-tree-row,
treechildren::-moz-tree-row(current, focus),
treechildren::-moz-tree-row(selected, current, focus) {
    border: none !important;
}

treechildren::-moz-tree-row(selected, current, focus) {
    border: none !important;
}

.sidebar-panel treechildren::-moz-tree-cell-text(primary, dropOn) {
    background: none !important;
}

.sidebar-panel treechildren::-moz-tree-cell(primary, dropOn) {
    background-color: var(--places-cell-focus-bgcolor) !important;
}

treechildren::-moz-tree-drop-feedback {
    background-color: transparent !important;
    margin-inline-start: 8px !important;
    pointer-events: none;
    background-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='white' d='M8.293 4.293a1 1 0 011.414 0l7 7a1 1 0 010 1.414l-7 7a1 1 0 01-1.414-1.414L14.586 12 8.293 5.707a1 1 0 010-1.414z'/></svg>") !important;
    background-repeat: no-repeat !important;
    background-size: contain !important;
    height: 14px !important;
}

treechildren::-moz-tree-twisty {
    width: 14px !important;
    height: auto !important;
    padding-inline: 3px !important;
    list-style-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M8.293 4.293a1 1 0 011.414 0l7 7a1 1 0 010 1.414l-7 7a1 1 0 01-1.414-1.414L14.586 12 8.293 5.707a1 1 0 010-1.414z'/></svg>") !important;
    -moz-context-properties: fill, fill-opacity;
}

treechildren:-moz-locale-dir(rtl)::-moz-tree-twisty(closed) {
    list-style-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M15.707 4.293a1 1 0 010 1.414L9.414 12l6.293 6.293a1 1 0 11-1.414 1.414l-7-7a1 1 0 010-1.414l7-7a1 1 0 011.414 0z'/></svg>") !important;
}

treechildren::-moz-tree-twisty(open) {
    list-style-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M4.293 8.293a1 1 0 011.414 0L12 14.586l6.293-6.293a1 1 0 111.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 010-1.414z'/></svg>") !important;
}

.item.client .item-twisty-container {
    min-width: 14px !important;
    height: 14px !important;
    background-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M4.293 8.293a1 1 0 011.414 0L12 14.586l6.293-6.293a1 1 0 111.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 010-1.414z'/></svg>") !important;
    -moz-context-properties: fill, fill-opacity;
}

.item.client.closed .item-twisty-container {
    background-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M8.293 4.293a1 1 0 011.414 0l7 7a1 1 0 010 1.414l-7 7a1 1 0 01-1.414-1.414L14.586 12 8.293 5.707a1 1 0 010-1.414z'/></svg>") !important;
}

.item.client.closed .item-twisty-container:dir(rtl) {
    background-image: url("data:image/svg+xml;utf8,<svg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path fill='context-fill' fill-opacity='context-fill-opacity' d='M15.707 4.293a1 1 0 010 1.414L9.414 12l6.293 6.293a1 1 0 11-1.414 1.414l-7-7a1 1 0 010-1.414l7-7a1 1 0 011.414 0z'/></svg>") !important;
}

.sidebar-placesTreechildren::-moz-tree-cell-text {
    padding-right: 7px !important;
}

.sidebar-placesTreechildren::-moz-tree-cell-text(selected),
.sidebar-placesTreechildren::-moz-tree-image(selected),
.sidebar-placesTreechildren::-moz-tree-twisty(selected) {
    color: var(--lwt-text-color) !important;
}

.sidebar-placesTreechildren::-moz-tree-row-text(selected) {
    color: var(--lwt-text-color) !important;
}

.sidebar-placesTreechildren::-moz-tree-indentation {
    width: 16px;
}

.sidebar-placesTree {
    appearance: none !important;
    color: var(--lwt-text-color) !important;
}

.sidebar-splitter {
    border-inline-end-width: 1px !important;
    border-inline-end-color: transparent !important;
    position: relative !important;
    z-index: 5 !important;
    width: 4px !important;
}

#sidebar-splitter {
    display: none !important;
}

@-moz-document url("chrome://browser/content/syncedtabs/sidebar.xhtml")
{
    body {
        background-color: var(--ui-secondary-bg) !important;
        color: var(--lwt-text-color) !important;
        fill: hsla(213, 43%, 89%, 80%) !important;
    }

    .content-header {
        appearance: none !important;
        padding: 1px !important;
        margin-top: -4px !important;
        border-bottom: 0px solid transparent !important;
        background-color: var(--ui-secondary-bg) !important;
        color: #fff !important;
    }

    .search-box {
        appearance: none !important;
        padding-inline-start: 7px !important;
        background-color: var(--ui-textbox-bgcolor) !important;
        border-radius: 3px !important;
        padding-top: 4px !important;
        padding-bottom: 4px !important;
    }

    .sidebar-search-container {
        padding-inline-start: 3px !important;
        padding-inline-end: 3px !important;
    }

    .sidebar-search-container .search-box input {
        background: none !important;
        color: #fff !important;
        padding-inline-start: 5px !important;
    }

    .sidebar-search-container .search-box textarea {
        background-color: var(--ui-textbox-bgcolor) !important;
        color: #fff !important;
    }

    .textbox-input-box {
        line-height: 18px !important;
    }

    .item-icon-container {
        fill: hsla(213, 43%, 89%, 80%) !important;
    }

    .item-twisty-container,
    .item-icon-container {
        margin-inline-start: 3px !important;
    }

    .item-tabs-list .item-icon-container {
        margin-inline-start: 16px !important;
    }

    .list {
        margin-top: 2.5px !important;
    }

    .item.tab,
    .item.tab * {
        cursor: pointer !important;
    }

    .item.selected > .item-title-container:not(:hover) {
        appearance: none !important;
        background-color: var(--places-cell-focus-bgcolor) !important;
        color: var(--lwt-text-color) !important;
    }

    .item.selected:-moz-window-inactive > .item-title-container:not(:hover) {
        background-color: transparent !important;
    }

    .item-title-container:hover {
        appearance: none !important;
        background-color: var(--places-cell-hover-bgcolor) !important;
        color: var(--lwt-text-color) !important;
    }

    .item.client.selected > .item-title-container:not(:hover) {
        background: none !important;
        color: inherit !important;
    }

    /* .client .item.tab > .item-title-container {
        padding-inline-start: 26px;
    } */

    ::selection {
        background-color: rgba(255, 255, 255, 0.9) !important;
        color: hsl(236, 20%, 16%) !important;
    }
}

#sidebar-box {
    background-color: var(--ui-secondary-bg) !important;
    top: calc(var(--urlbar-container-height) + var(--tab-min-height)) !important;
    bottom: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    position: fixed !important;
    z-index: 1 !important;
    left: 0 !important;
    right: auto !important;
    box-shadow: 0px 0px 8px -4px hsla(240, 4%, 0%, 0.6), 0px 0px 15px 0px hsla(0, 0%, 0%, 0.2) !important;
}

:root[sizemode="normal"] #sidebar-box {
    top: calc(
        var(--urlbar-container-height) + var(--tab-min-height) + var(--space-above-tabbar)
    ) !important;
}

#sidebar-box[hidden] {
    display: none !important;
}

#sidebar-box[positionend] {
    left: auto !important;
    right: 0 !important;
}

#sidebar-header {
    top: 0 !important;
}

#sidebar {
    min-width: -moz-available !important;
    flex-grow: 1 !important;
}
