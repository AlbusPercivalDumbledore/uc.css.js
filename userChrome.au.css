/* use scrollbars instead of scroll buttons on most arrowscrollboxes */
menupopup::part(arrowscrollbox-scrollbox) {
    overflow-y: auto !important;
    padding-top: 0 !important;
    margin-block: 0 !important;
    scroll-behavior: smooth !important;
}

#BMB_bookmarksPopup::part(arrowscrollbox),
#BMB_bookmarksPopup menupopup::part(arrowscrollbox),
#BMB_bookmarksPopup menupopup[placespopup="true"]::part(arrowscrollbox) {
    padding-block: 4px;
}

#BMB_bookmarksPopup::part(arrowcontent) {
    padding-block: 0;
}

#BMB_bookmarksPopup menupopup[placespopup="true"]::part(innerbox) {
    margin-top: 0;
    border: none;
}

#BMB_bookmarksPopup .panel-subview-footer-button {
    margin-bottom: unset;
}

.panel-subview-footer-button {
    margin-bottom: 4px;
}

/* panel width */
#customizationui-widget-multiview panelview:not([extension]) {
    width: unset;
    min-width: 23em;
}

:where(#customizationui-widget-multiview) panelview:not([extension]) {
    max-width: 18vw;
}

/* focused buttons to look like hovered buttons */
panelview
    :is(.toolbarbutton-1, toolbarbutton.subviewbutton, .navigable.subviewbutton):not([disabled], [open]):focus,
.widget-overflow-list .toolbarbutton-1:not([disabled], [open]):focus,
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
    > toolbarbutton:not([disabled], [open]):focus {
    background-color: var(--panelview-toolbarbutton-hover-bgcolor);
    color: var(--panelview-toolbarbutton-hover-color);
}

panelview
    :is(.toolbarbutton-1, toolbarbutton.subviewbutton, .navigable.subviewbutton):not([disabled], [open]):focus:active,
.widget-overflow-list .toolbarbutton-1:not([disabled], [open]):focus:active,
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
    > toolbarbutton:not([disabled], [open]):focus:active {
    background-color: var(--panelview-toolbarbutton-active-bgcolor);
    color: var(--panelview-toolbarbutton-active-color);
}

menupopup::part(drop-indicator-bar) {
    margin-block: -14px;
}

menupopup::part(drop-indicator) {
    pointer-events: none;
    background: none;
    list-style-image: url(chrome://userchrome/content/menu-drop-indicator.svg) !important;
    -moz-context-properties: fill, fill-opacity, stroke, stroke-opacity;
    fill: var(--lwt-toolbarbutton-icon-fill, currentColor);
    height: 28px;
    max-width: 28px;
    padding-block: 3px;
    padding-inline: 0 6px;
}

/* padding for proton context menus */
:is(#back-button, #forward-button, #viewButton) > menupopup::part(arrowscrollbox),
:is(.popup-notification-dropmarker, #main-menubar, #PlacesToolbar, #places)
    menupopup::part(arrowscrollbox),
:is(#toolbar-context-menu, #tabContextMenu, #contentAreaContextMenu, #backForwardMenu, #placesContext, #pageActionContextMenu, .search-one-offs-context-menu, #SyncedTabsSidebarContext, .textbox-contextmenu, #customizationPanelItemContextMenu, #customizationPaletteItemContextMenu, #customization-toolbar-menu, #new-tab-button-popup, #new-tab-button, #downloadsContextMenu, menupopup[menu-api], #ContentSelectDropdown, menupopup.in-menulist, .new-tab-popup, #openHandlerPopup)::part(arrowscrollbox),
:is(#back-button, #forward-button, #viewButton) > menupopup menupopup::part(arrowscrollbox),
:is(.popup-notification-dropmarker, #main-menubar, #PlacesToolbar, #places)
    menupopup
    menupopup::part(arrowscrollbox),
:is(#toolbar-context-menu, #tabContextMenu, #contentAreaContextMenu, #backForwardMenu, #placesContext, #pageActionContextMenu, .search-one-offs-context-menu, #SyncedTabsSidebarContext, .textbox-contextmenu, #customizationPanelItemContextMenu, #customizationPaletteItemContextMenu, #customization-toolbar-menu, #new-tab-button-popup, #new-tab-button, #downloadsContextMenu, menupopup[menu-api], #ContentSelectDropdown, menupopup.in-menulist, .new-tab-popup, #openHandlerPopup)
    menupopup::part(arrowscrollbox) {
    padding: var(--menupopup-inner-padding) !important;
}

@-moz-document url-prefix("chrome://devtools/content/")
{
    menupopup::part(arrowscrollbox) {
        padding: var(--menupopup-inner-padding) !important;
    }
}

#ContentSelectDropdown > menupopup::part(arrowscrollbox) {
    padding: var(--menupopup-inner-padding) !important;
}

/* hide tab bar's arrow buttons and spacers */
#tabbrowser-arrowscrollbox::part(scrollbutton-up),
#tabbrowser-arrowscrollbox::part(scrollbutton-down),
#tabbrowser-arrowscrollbox::part(overflow-start-indicator),
#tabbrowser-arrowscrollbox::part(overflow-end-indicator) {
    visibility: collapse;
}

/* when drag mode is enabled. this enables the tab shadows to draw onto the drag space. */
:root[sizemode="normal"] #TabsToolbar > .toolbar-items #tabbrowser-arrowscrollbox::part(scrollbox) {
    min-height: calc(var(--min-tab-height) + var(--space-above-tabbar));
    padding-block-start: var(--space-above-tabbar);
}

/* protections popup panel's arrow style */
#protections-popup[mainviewshowing][side="top"]::part(arrow) {
    fill: var(--protection-header-arrow-color);
    stroke: var(--protection-header-arrow-color) !important;
}

/* other panel arrows */
:is(panel, menupopup)::part(arrow) {
    stroke: var(--arrowpanel-background);
}

@-moz-document url(chrome://browser/content/browser.xhtml)
{
    :is(panel, menupopup)::part(arrow) {
        display: -moz-inline-box;
    }

    :is(panel, menupopup)[side="top"]::part(arrow) {
        margin-bottom: -4px;
    }
}

#identity-icon {
    list-style-image: var(--default-identity-icon);
}

/* dropmarkers and other select/menulist stuff */
@-moz-document url(chrome://browser/content/browser.xhtml),
    url("chrome://mozapps/content/handling/permissionDialog.xhtml"),
    url("chrome://mozapps/content/handling/appChooser.xhtml"),
    url-prefix("chrome://global/content/print.html"),
    url("chrome://browser/content/places/bookmarkProperties.xhtml"),
    url("chrome://browser/content/places/bookmarkProperties2.xhtml")
{
    menulist:not([native]) {
        padding-inline: 6px;
    }

    :is(panel, dialog) menulist::part(dropmarker-icon) {
        appearance: none;
        list-style-image: url(chrome://userchrome/content/select-drop-marker.svg);
        margin-block: 0 !important;
        width: 10px !important;
        fill-opacity: 0.6;
    }

    :is(panel, dialog) menulist:is(:hover)::part(dropmarker-icon) {
        fill-opacity: 0.8;
    }

    :is(panel, dialog)
        menulist:is(:focus-visible, :hover:active, [open="true"])::part(dropmarker-icon) {
        fill-opacity: 1;
    }

    :is(panel, dialog) menulist::part(dropmarker) {
        margin-inline-start: 6px;
    }

    :is(panel, dialog) menulist::part(icon),
    :is(panel, dialog) menulist::part(dropmarker),
    :is(panel, dialog) menulist::part(dropmarker-icon) {
        -moz-context-properties: fill, fill-opacity;
    }

    :is(panel, dialog) menulist::part(label) {
        font-weight: normal;
    }

    menulist::part(label) {
        appearance: none;
        margin-block: 0;
    }

    #editBMPanel_folderMenuList::part(icon) {
        margin-inline: 3px;
    }
}

/* proton stuff */
.subviewbutton > menupopup::part(innerbox) {
    border-radius: 5px;
}

.menu-text,
.menu-iconic-text {
    padding-block: 0;
}

/* prevent hiding the close button when audio is playing. undoes an irritating rule in the proton update */
#navigator-toolbox:not(:hover)
    .tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]),
#navigator-toolbox:hover
    .tab-icon-stack:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked])
    > :not(.tab-icon-overlay) {
    opacity: revert;
}

#toolbar-menubar:not(:hover)
    + #TabsToolbar:not(:hover)
    .tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]),
:is(#toolbar-menubar:hover + #TabsToolbar, #TabsToolbar:hover)
    .tab-icon-stack:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked])
    > :not(.tab-icon-overlay) {
    opacity: revert;
}

/* revert proton changes */
.browserContainer > findbar {
    padding: 0;
}

.findbar-container {
    padding-block: 4px;
    padding-inline: 8px;
}

.findbar-find-previous,
.findbar-find-next {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid ThreeDShadow;
    border-inline-start: none;
    border-radius: 0;
}

.findbar-find-previous > .toolbarbutton-icon,
.findbar-find-next > .toolbarbutton-icon {
    padding: 0;
}

.findbar-find-previous {
    margin-inline-start: 0;
}

.findbar-find-next {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
    margin-inline-end: 0;
}

#downloads-indicator-anchor {
    min-width: 16px;
    min-height: 16px;
}

#downloads-indicator-progress-outer {
    width: 16px;
    height: 16px;
    background-size: 16px;
    background: url("chrome://userchrome/content/downloads/download-icons.svg#default-bar") center
        no-repeat;
}

#downloads-button[attention="success"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon,
#downloads-button[attention="success"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-progress-outer {
    -moz-context-properties: fill, fill-opacity;
    fill: var(--toolbarbutton-icon-fill-attention);
    fill-opacity: 1;
}
#downloads-button[progress]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-progress-outer {
    background: url("chrome://userchrome/content/downloads/download-icons.svg#progress-bar-bg")
        center no-repeat;
}

#downloads-indicator-icon {
    -moz-context-properties: fill, fill-opacity;
    background-image: url("chrome://userchrome/content/downloads/download-icons.svg#arrow");
    width: 16px;
    height: 16px;
}

#downloads-indicator-progress-inner {
    background: url("chrome://userchrome/content/downloads/download-icons.svg#progress-bar-fg") left
        no-repeat;
    margin-inline-end: 16px;
    -moz-context-properties: fill;
    fill: var(--toolbarbutton-icon-fill-attention);
    background-size: 16px;
    animation-play-state: paused;
    animation-delay: 1s;
    animation-duration: 100s;
    animation-timing-function: linear;
    animation-name: indicatorArrowProgress;
}

#downloads-indicator-progress-inner:-moz-locale-dir(rtl) {
    background-position-x: right;
}

@keyframes indicatorArrowProgress {
    0% {
        margin-inline-end: 15px;
    }
    100% {
        margin-inline-end: 1px;
    }
}

/*** Status badges ***/
#downloads-button[attention="warning"] > .toolbarbutton-badge-stack > .toolbarbutton-badge,
#downloads-button[attention="severe"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
    display: -moz-box;
    height: 8px;
    width: 8px;
    min-width: 0;
    border-radius: 50%;
    margin-top: -1px !important;
    margin-inline-end: -2px !important;
}

#downloads-button[cui-areatype="toolbar"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
    height: 7px;
    width: 7px;
}

#downloads-button[attention="severe"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
    background: #d90000;
}

#downloads-button[attention="warning"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
    background: #ffbf00;
}

#downloads-button[attention="severe"]
    > .toolbarbutton-badge-stack
    > .toolbarbutton-badge:-moz-window-inactive,
#downloads-button[attention="warning"]
    > .toolbarbutton-badge-stack
    > .toolbarbutton-badge:-moz-window-inactive {
    filter: none;
}

/*** Download notifications ***/
#downloads-button[notification="start"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon {
    animation-name: downloadsIndicatorStartDip;
    animation-duration: 360ms;
    animation-delay: 400ms;
    animation-iteration-count: 1;
}

@keyframes downloadsIndicatorStartDip {
    0% {
        transform: translateY(0);
        animation-timing-function: linear;
    }
    50% {
        transform: translateY(0);
        animation-timing-function: ease-out;
    }
    88% {
        transform: translateY(3px);
        animation-timing-function: ease-out;
    }
    100% {
        transform: translateY(0);
    }
}

@keyframes downloadsIndicatorFinishPulse {
    from {
        transform: scale(1);
    }
    37.5% {
        transform: scale(1.4);
        animation-timing-function: ease-out;
    }
    to {
        transform: scale(1);
        animation-timing-function: ease-in;
    }
}

#downloads-button[notification="finish"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon {
    animation-name: downloadsIndicatorFinishPulse;
    animation-delay: 250ms;
    animation-duration: 300ms;
    animation-iteration-count: 2;
}

#downloads-animation-container {
    min-height: 1px;
    min-width: 1px;
    height: 1px;
    margin-bottom: -1px;
    position: relative;
    z-index: 5;
    pointer-events: none;
}

/* download start animation */

#downloads-notification-anchor {
    width: 42px;
    height: 98px;
    min-height: 98px;
    overflow: hidden;
    direction: ltr;
}

#downloads-indicator-notification {
    opacity: 0;
    min-width: 1344px;
    height: 98px;
    -moz-context-properties: fill;
    fill: #737373;
}

@keyframes downloadsIndicatorNotificationStart {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-1302px);
    }
}

#downloads-notification-anchor[notification="start"] > #downloads-indicator-notification {
    opacity: 1;
    background: url(chrome://userchrome/content/downloads/notification-start-animation.svg) 0 center
        no-repeat;
    transform: translateX(0px);
    animation-name: downloadsIndicatorNotificationStart;
    animation-duration: 540ms;
    animation-delay: 64ms;
    animation-timing-function: steps(31);
}

#back-button {
    list-style-image: url(chrome://userchrome/content/skin/back.svg);
}

#forward-button {
    list-style-image: url(chrome://userchrome/content/skin/forward.svg);
}

:is(#reload-button, #stop-button) > .toolbarbutton-animatable-box {
    display: none;
}

#nav-bar-customization-target
    > #stop-reload-button
    > :is(#reload-button, #stop-button)
    > .toolbarbutton-animatable-box {
    display: block;
}

#stop-reload-button[animate] > #reload-button > .toolbarbutton-icon,
#stop-reload-button[animate] > #reload-button[displaystop] + #stop-button > .toolbarbutton-icon {
    fill: transparent;
}

@keyframes reload-to-stop {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-450px);
    }
}

@keyframes stop-to-reload {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-450px);
    }
}

#stop-reload-button[animate] > #reload-button,
#stop-reload-button[animate] > #stop-button {
    position: relative;
}

#reload-button > .toolbarbutton-animatable-box,
#stop-button > .toolbarbutton-animatable-box {
    top: calc(50% - 10px); /* Vertically center the 20px tall animatable image */
    /* Since .toolbarbutton-icon uses a different width than the animatable-box,
    we need to set a padding relative to the difference in widths. */
    margin-inline-start: calc((16px + 2 * var(--toolbarbutton-inner-padding) - 18px) / 2);
    width: 18px; /* Width of each frame within the SVG sprite */
    height: 20px; /* Height of each frame within the SVG sprite */
}

#stop-reload-button[animate]
    > #reload-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/reload-to-stop.svg);
    width: 468px;
}

#stop-reload-button[animate]
    > #reload-button:not([displaystop])
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: reload-to-stop;
}

#reload-button:not([displaystop])
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-timing-function: steps(25);
    animation-duration: 417ms;
}

#stop-reload-button[animate]
    > #reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/stop-to-reload.svg);
    width: 468px;
}

#stop-reload-button[animate]
    > #reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: stop-to-reload;
}

#reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-timing-function: steps(25);
    animation-duration: 417ms;
}

#reload-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image,
#reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    transform: translateX(-450px);
}

#reload-button {
    list-style-image: url(chrome://userchrome/content/skin/reload.svg);
}

#stop-button {
    list-style-image: url(chrome://userchrome/content/skin/stop.svg);
}

#home-button {
    list-style-image: url(chrome://userchrome/content/skin/home.svg);
}

#bookmarks-toolbar-button,
#bookmarks-toolbar-placeholder {
    list-style-image: url(chrome://userchrome/content/skin/bookmarks-toolbar.svg);
}

#bookmarks-menu-button {
    list-style-image: url(chrome://userchrome/content/skin/bookmark-star-on-tray.svg);
}

#history-panelmenu,
#sidebar-switcher-history > .toolbarbutton-icon,
#sidebar-box[sidebarcommand="viewHistorySidebar"]
    > #sidebar-header
    > #sidebar-switcher-target
    > #sidebar-icon {
    list-style-image: url(chrome://userchrome/content/skin/history.svg);
}

#downloads-button {
    list-style-image: url("chrome://userchrome/content/skin/downloads/download-icons.svg#arrow-with-bar");
}

#open-file-button {
    list-style-image: url(chrome://userchrome/content/skin/open.svg);
}

#screenshot-button {
    list-style-image: var(--screenshot-icon);
}

#save-page-button {
    list-style-image: url(chrome://userchrome/content/skin/save.svg);
}

#sync-button,
#sidebar-switcher-tabs > .toolbarbutton-icon,
#sidebar-box[sidebarcommand="viewTabsSidebar"]
    > #sidebar-header
    > #sidebar-switcher-target
    > #sidebar-icon {
    list-style-image: url(chrome://userchrome/content/skin/tab.svg);
}

#characterencoding-button {
    list-style-image: url(chrome://userchrome/content/skin/characterEncoding.svg);
}

#new-window-button {
    list-style-image: url(chrome://userchrome/content/skin/new-window.svg);
}

#new-tab-button {
    list-style-image: url(chrome://userchrome/content/skin/new-tab.svg);
}

#privatebrowsing-button {
    list-style-image: url(chrome://userchrome/content/skin/privateBrowsing.svg);
}

#find-button {
    list-style-image: url(chrome://userchrome/content/search-glass.svg);
}

#print-button {
    list-style-image: url(chrome://userchrome/content/print.svg);
}

#fullscreen-button {
    list-style-image: url(chrome://userchrome/content/skin/fullscreen.svg);
}

#developer-button {
    list-style-image: url(chrome://userchrome/content/skin/developer.svg);
}

#profiler-button-button > .toolbarbutton-icon {
    list-style-image: url(chrome://userchrome/content/devtools/tool-profiler.svg);
}

#profiler-button-button:not(.profiler-active) > image {
    transform: scaleX(-1);
}

#profiler-button-button.profiler-active > image {
    fill: #0060df;
    fill-opacity: 1;
    background-color: #0060df33;
}

#profiler-button-button.profiler-active:hover > image {
    background-color: #0060df22;
}

#profiler-button-button.profiler-paused > image {
    opacity: 0.4;
}

#preferences-button {
    list-style-image: url(chrome://userchrome/content/settings.svg);
}

#PanelUI-menu-button {
    list-style-image: url(chrome://userchrome/content/skin/menu.svg);
}

#PanelUI-menu-button[badge-status="update-available"],
#PanelUI-menu-button[badge-status="update-downloading"],
#PanelUI-menu-button[badge-status="update-manual"],
#PanelUI-menu-button[badge-status="update-other-instance"],
#PanelUI-menu-button[badge-status="update-restart"] {
    list-style-image: url(chrome://userchrome/content/skin/menu-badged.svg);
}

#cut-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-cut.svg);
}

#copy-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-copy.svg);
}

#paste-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-paste.svg);
}

#zoom-out-button {
    list-style-image: url(chrome://userchrome/content/skin/zoom-out.svg);
}

#zoom-in-button {
    list-style-image: url(chrome://userchrome/content/skin/zoom-in.svg);
}

#PlacesChevron,
#nav-bar-overflow-button {
    list-style-image: url(chrome://userchrome/content/chevron.svg);
}

#nav-bar-overflow-button[animate] > .toolbarbutton-icon {
    fill: transparent;
}

@keyframes overflow-animation {
    from {
        transform: translateX(0);
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(-1260px);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

/* The animation is supposed to show the blue fill color for 520ms, then the
fade to the toolbarbutton-fill color for the remaining 210ms. Thus with an
animation-duration of 730ms, 71% is the point where we start the fade out. */
@keyframes overflow-fade {
    from {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    71% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        fill: inherit;
    }
}

#nav-bar-overflow-button > .toolbarbutton-animatable-box {
    top: calc(50% - 18px); /* Vertically center the 36px tall animatable image */
    /* Since .toolbarbutton-icon uses a different width than the animatable box,
    we need to set a padding relative to the difference in widths. */
    margin-inline-start: calc((16px + 2 * var(--toolbarbutton-inner-padding) - 18px) / 2);
    width: 18px; /* Width of each frame within the SVG sprite */
    height: 36px; /* Height of each frame within the SVG sprite */
}

#nav-bar-overflow-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image {
    min-height: 36px; /* Minimum height must be equal to the height of the SVG sprite */
}

#nav-bar-overflow-button[animate]
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: overflow-animation;
    animation-timing-function: steps(70);
    animation-duration: 1167ms;
    background-image: url(chrome://userchrome/content/skin/chevron-animation.svg);
    width: 1278px;
}

#nav-bar-overflow-button[animate][fade]
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: overflow-fade;
    animation-timing-function: ease-out;
    animation-duration: 730ms;
}

#email-link-button {
    list-style-image: url(chrome://userchrome/content/skin/mail.svg);
}

#sidebar-button {
    list-style-image: url(chrome://userchrome/content/skin/sidebars-right.svg);
}

#sidebar-button:-moz-locale-dir(ltr):not([positionend]),
#sidebar-button:-moz-locale-dir(rtl)[positionend] {
    list-style-image: url(chrome://userchrome/content/skin/sidebars.svg);
}

#panic-button {
    list-style-image: url(chrome://userchrome/content/skin/forget.svg);
}

#panic-button[open] {
    fill: rgb(213, 32, 20);
}

toolbar[brighttext] #panic-button[open] {
    fill: #ff848b;
}

#library-button {
    list-style-image: url(chrome://userchrome/content/skin/library.svg);
}

@keyframes library-bookmark-animation {
    from {
        transform: translateX(0);
        fill: inherit;
    }
    25% {
        fill: inherit;
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(-1056px);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

@keyframes library-bookmark-animation-rtl {
    from {
        transform: translateX(1056px);
        fill: inherit;
    }
    25% {
        fill: inherit;
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(0);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

@keyframes library-bookmark-fade {
    from {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        fill: inherit;
    }
}

#library-button[animate] > .toolbarbutton-icon {
    fill: transparent;
}

#library-animatable-box[animate] {
    /* Position the sprite at the y-position of the library-button, then adjust
    based on the size difference between half of the button height and half
    of the sprite height. */
    top: calc(var(--library-button-height) / 2 - 27px);
    /* Set a margin relative to the difference in widths of the .toolbarbutton-icon
    and the .toolbar-animatable-box. This is correct even in RTL because the item
    is positioned using `left`. */
    left: calc(var(--library-icon-x) + (16px + 2 * var(--toolbarbutton-inner-padding) - 22px) / 2);
    width: 22px; /* Width of each frame within the SVG sprite */
    height: 54px; /* Height of each frame within the SVG sprite */
}

#library-animatable-box[animate] > .toolbarbutton-animatable-image {
    min-height: 54px; /* Minimum height must be equal to the height of the SVG sprite */
    width: 1078px;
    animation-duration: 800ms;
    animation-timing-function: steps(48);
}

#library-animatable-box[animate][fade] > .toolbarbutton-animatable-image {
    animation-duration: 2s;
    animation-timing-function: ease-out;
}

#library-animatable-box[animate="bookmark"] > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/library-bookmark-animation.svg);
    animation-name: library-bookmark-animation;
    -moz-context-properties: fill, fill-opacity, stroke;
    stroke: var(--toolbarbutton-icon-fill-attention);
}

#library-animatable-box[animate="bookmark"]:-moz-locale-dir(rtl) > .toolbarbutton-animatable-image {
    animation-name: library-bookmark-animation-rtl;
}

#library-animatable-box[animate="bookmark"][fade] > .toolbarbutton-animatable-image {
    animation-name: library-bookmark-fade;
}

#save-to-pocket-button {
    list-style-image: url(chrome://userchrome/content/skin/pocket-outline.svg);
    fill: var(--lwt-toolbarbutton-icon-fill, currentColor);
    fill-opacity: var(--toolbarbutton-icon-fill-opacity);
}

#save-to-pocket-button[open="true"],
#save-to-pocket-button[pocketed="true"] {
    list-style-image: url(chrome://userchrome/content/skin/pocket.svg);
    fill: #ef4056;
}

.panel-header > .subviewbutton-back {
    list-style-image: url(chrome://userchrome/content/menu-arrow-left-big.svg);
}

.notification-anchor-icon {
    list-style-image: url(chrome://userchrome/content/info-filled.svg);
}

/* INDIVIDUAL NOTIFICATIONS */

.focus-tab-by-prompt-icon {
    list-style-image: url(chrome://userchrome/content/notifications/focus-tab-by-prompt.svg);
}

.popup-notification-icon[popupid="storage-access"],
.storage-access-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/3rdpartycookies.svg);
}

.popup-notification-icon[popupid="persistent-storage"],
.persistent-storage-icon {
    list-style-image: url(chrome://userchrome/content/notifications/persistent-storage.svg);
}

.persistent-storage-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/persistent-storage-blocked.svg);
}

.popup-notification-icon[popupid="web-notifications"],
.desktop-notification-icon {
    list-style-image: url(chrome://userchrome/content/notifications/desktop-notification.svg);
}

.desktop-notification-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/desktop-notification-blocked.svg);
}

.geo-icon {
    list-style-image: url(chrome://userchrome/content/notifications/geo.svg);
}

.geo-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/geo-blocked.svg);
}

.popup-notification-icon[popupid="geolocation"] {
    list-style-image: url(chrome://userchrome/content/notifications/geo-detailed.svg);
}

.open-protocol-handler-icon {
    list-style-image: url(chrome://userchrome/content/open-in-new.svg);
}

.open-protocol-handler-icon:-moz-locale-dir(rtl) {
    transform: scaleX(-1);
}

.xr-icon {
    list-style-image: url(chrome://userchrome/content/notifications/xr.svg);
}

.xr-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/xr-blocked.svg);
}

.popup-notification-icon[popupid="xr"] {
    list-style-image: url(chrome://userchrome/content/notifications/xr.svg);
}

.autoplay-media-icon {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media.svg);
}

.popup-notification-icon[popupid="autoplay-media"] {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media-detailed.svg);
}

.autoplay-media-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media-blocked.svg);
}

.storage-access-notification-content {
    color: var(--panel-disabled-color);
    font-style: italic;
    margin-top: 15px;
}

.storage-access-notification-content .text-link {
    color: -moz-nativehyperlinktext;
}

.storage-access-notification-content .text-link:hover {
    text-decoration: underline;
}

#storage-access-notification .popup-notification-body-container {
    padding: 20px;
}

.popup-notification-icon[popupid="indexedDB-permissions-prompt"],
.indexedDB-icon {
    list-style-image: url(chrome://userchrome/content/notifications/indexedDB.svg);
}

.popup-notification-icon[popupid="password"],
.login-icon {
    list-style-image: url(chrome://userchrome/content/skin/login.svg);
}

.login-icon[extraAttr="attention"] {
    fill: var(--toolbarbutton-icon-fill-attention);
    fill-opacity: 1;
}

.camera-icon {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

.camera-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

.camera-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/camera-blocked.svg);
}

.microphone-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.microphone-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.microphone-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone-blocked.svg);
}

.popup-notification-icon.microphone-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone-detailed.svg);
}

.screen-icon {
    list-style-image: url(chrome://userchrome/content/notifications/screen.svg);
}

.screen-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/screen.svg);
}

.screen-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/screen-blocked.svg);
}

.midi-icon,
.midi-sysex-icon,
.popup-notification-icon[popupid="midi"],
.popup-notification-icon[popupid="midi-sysex"] {
    list-style-image: url(chrome://userchrome/content/notifications/midi.svg);
}

#canvas-notification-icon,
.popup-notification-icon[popupid="canvas-permissions-prompt"],
.canvas-icon {
    list-style-image: url(chrome://userchrome/content/notifications/canvas.svg);
}

.canvas-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/canvas-blocked.svg);
}

#webauthn-notification-icon,
.popup-notification-icon[popupid^="webauthn-prompt-"] {
    list-style-image: url(chrome://userchrome/content/notifications/webauthn.svg);
}

.popup-icon {
    list-style-image: url(chrome://userchrome/content/notifications/popup.svg);
}

.popup-subitem {
    list-style-image: url(chrome://userchrome/content/notifications/popup-subitem.svg);
    margin-inline-start: 42px;
    width: 16px;
    height: 16px;
    -moz-context-properties: fill, fill-opacity;
    fill: currentColor;
    fill-opacity: 0.6;
}

.popup-subitem:-moz-locale-dir(rtl) {
    transform: scaleX(-1);
}

#permission-popup-menulist,
#permission-popup-menulist > menupopup {
    min-width: 6.5em;
}

/* EME */

.popup-notification-icon[popupid="drmContentPlaying"],
.drm-icon {
    list-style-image: url(chrome://userchrome/content/skin/drm-icon.svg);
}

.notification-anchor-icon[animate="true"],
#eme-notification-icon[firstplay="true"] {
    animation: emeTeachingMoment 0.2s linear 0s 5 normal;
}

@keyframes emeTeachingMoment {
    0% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(3px);
    }
    75% {
        transform: translateX(-3px);
    }
    100% {
        transform: translateX(0);
    }
}

/* INSTALL ADDONS */

.install-icon {
    list-style-image: url(chrome://userchrome/content/material/extension.svg);
}

.install-icon.blocked-permission-icon,
.popup-notification-icon[popupid="xpinstall-disabled"],
.popup-notification-icon[popupid="addon-install-blocked"],
.popup-notification-icon[popupid="addon-install-origin-blocked"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-blocked.svg);
}

.popup-notification-icon[popupid="addon-progress"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-downloading.svg);
}

.popup-notification-icon[popupid="addon-install-failed"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-error.svg);
}

.popup-notification-icon[popupid="addon-install-confirmation"] {
    list-style-image: url(chrome://userchrome/content/material/extension.svg);
}

#addon-install-confirmation-notification[warning]
    .popup-notification-icon[popupid="addon-install-confirmation"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-warning.svg);
}

.popup-notification-icon[popupid="addon-install-complete"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-installed.svg);
}

/* OFFLINE APPS */

.popup-notification-icon[popupid="offline-app-usage"] {
    list-style-image: url(chrome://userchrome/content/help.svg);
}

/* PLUGINS */

.plugin-icon {
    list-style-image: url(chrome://userchrome/content/plugin.svg);
    transition: fill 1.5s;
}

#plugin-icon-badge {
    list-style-image: url(chrome://userchrome/content/notifications/plugin-badge.svg);
    width: 16px;
    height: 16px;
    opacity: 0;
    transition: opacity 1.5s;
}

#plugins-notification-icon:not(.plugin-blocked)[extraAttr="inactive"] > .plugin-icon {
    fill-opacity: 0.25;
}

#plugins-notification-icon[extraAttr="inactive"] > #plugin-icon-badge {
    opacity: 1;
}

#plugins-notification-icon[extraAttr="inactive"] > #plugin-icon-badge[animate] {
    animation: blink-badge 1000ms ease 0s 5 alternate both;
}

@keyframes blink-badge {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.plugin-blocked > .plugin-icon {
    list-style-image: url(chrome://userchrome/content/plugin-blocked.svg);
    fill: #d92215 !important;
}

.plugin-blocked > #plugin-icon-badge {
    visibility: collapse;
}

#notification-popup-box[hidden] {
    /* Override display:none to make the pluginBlockedNotification animation work
       when showing the notification repeatedly. */
    display: -moz-box;
    /*! visibility: collapse; */
}

#plugins-notification-icon.plugin-blocked[showing] {
    animation: pluginBlockedNotification 500ms ease 0s 5 alternate both;
}

@keyframes pluginBlockedNotification {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* TRANSLATION */

.translation-icon {
    list-style-image: url(chrome://userchrome/content/material/translate.svg);
    -moz-image-region: auto;
}

.translation-icon.in-use {
    -moz-image-region: auto;
}

.translation-icon.in-use:not(:hover, :focus-visible, :active, [open]) {
    fill-opacity: 1;
    fill: var(--toolbarbutton-icon-fill-attention);
}

/* UPDATE */
.popup-notification-icon[popupid="update-available"],
.popup-notification-icon[popupid="update-downloading"],
.popup-notification-icon[popupid="update-manual"],
.popup-notification-icon[popupid="update-other-instance"],
.popup-notification-icon[popupid="update-restart"] {
    background: #74bf43 url(chrome://userchrome/content/notifications/update.svg) no-repeat center;
    border-radius: 50%;
}

.popup-notification-icon[popupid="update-unsupported"] {
    background: #ffe900 url(chrome://userchrome/content/notifications/update.svg) no-repeat center;
    border-radius: 50%;
}

