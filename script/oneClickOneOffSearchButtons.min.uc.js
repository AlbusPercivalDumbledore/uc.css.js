function searchClickInit(){function e(e){for(let n of e)switch(n.type){case"childList":case"subtree":for(let e=0;e<s.length;e++)"true"!=s[e].getAttribute("listening")&&(s[e].addEventListener("click",t,!1),s[e].setAttribute("listening","true"))}}function t(e){if(2==e.button)return;let t=e.originalTarget;(t.engine||t.source)&&(r.selectedButton=t,n(e,{engineName:t.engine?.name,source:t.source,entry:"oneoff"}),e.stopImmediatePropagation(),e.preventDefault())}function n(e,t){if(e.target==r.settingsButtonCompact)return r.input.controller.engagementEvent.discard(),void r.selectedButton.doCommand();let n={allowAutofill:!t.engineName&&t.source!=UrlbarUtils.RESULT_SOURCE.SEARCH,event:e},i=r.input.value&&"valid"!=r.input.getAttribute("pageproxystate"),s=Services.search.getEngineByName(t.engineName),{where:a,params:o}=r._whereToOpen(e);if(i&&s)return r.input.handleNavigation({event:e,oneOffParams:{openWhere:a,openParams:o,engine:r.selectedButton.engine}}),void(r.selectedButton=null);switch(a){case"current":r.input.searchMode=t,r.input.startQuery(n);break;case"tab":{t.isPreview=!1;let e=r.input.window.gBrowser.addTrustedTab("about:newtab");r.input.setSearchMode(t,e.linkedBrowser),i&&(e.linkedBrowser.userTypedValue=r.input.value),o?.inBackground||(r.input.window.gBrowser.selectedTab=e,e.ownerGlobal.gURLBar.startQuery(n));break}default:r.input.searchMode=t,r.input.startQuery(n),r.input.select()}r.selectedButton=null}var r=gURLBar.view.oneOffSearchButtons,i=r.buttons,s=i.children;let a=new MutationObserver(e),o={childList:!0,subtree:!0};a.observe(i,o)}if(gBrowserInit.delayedStartupFinished)this.searchClickInit();else{let e=(t,n)=>{"browser-delayed-startup-finished"==n&&t==window&&(Services.obs.removeObserver(e,n),this.searchClickInit())};Services.obs.addObserver(e,"browser-delayed-startup-finished")}