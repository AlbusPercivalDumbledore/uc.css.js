.tabbrowser-tab {
    min-height: var(--tab-min-height) !important;
}

#tabs-newtab-button {
    display: none !important;
}

#new-tab-button {
    display: -moz-box !important;
}

.titlebar-spacer[type="pre-tabs"] {
    display: none;
}

.titlebar-spacer[type="post-tabs"] {
    width: 15.6px !important;
}

:root[privatebrowsingmode="temporary"] .titlebar-spacer[type="post-tabs"] {
    width: 0px !important;
    margin-left: -2px !important;
}

#titlebar {
    -moz-box-orient: horizontal !important;
}

#tabbrowser-tabs {
    background-color: var(--lwt-accent-color) !important;
}

/* menubar next to tabs */
#toolbar-menubar {
    -moz-box-align: center !important;
    padding-inline: 6px !important;
    z-index: 12 !important;
    background: var(--lwt-accent-color) !important;
    position: relative !important;
    -moz-box-ordinal-group: 0;
}

#toolbar-menubar[inactive="true"] {
    opacity: 0 !important;
    height: 0 !important;
    pointer-events: none !important;
    width: 0 !important;
    min-width: 0 !important;
}

:root[sizemode="normal"] #toolbar-menubar:not([inactive]) > .titlebar-buttonbox-container {
    display: block !important;
    position: fixed !important;
    top: calc(10px + var(--space-above-tabbar)) !important;
    right: 0 !important;
    width: -moz-min-content !important;
}

:root[sizemode="maximized"] #toolbar-menubar:not([inactive]) > .titlebar-buttonbox-container {
    display: block !important;
    position: fixed !important;
    top: 17.5px !important;
    right: 0 !important;
    width: -moz-min-content !important;
}

:root[inFullscreen] #toolbar-menubar {
    visibility: visible !important;
}

:root[inFullscreen]
    body
    > box:not([urlbar-status], [popup-status])
    > #navigator-toolbox:not(:hover, :focus-within)
    > #titlebar
    > #toolbar-menubar {
    visibility: collapse !important;
}

/* the drag space should push down everything */
:root[sizemode="normal"]
    #TabsToolbar-customization-target
    > toolbarbutton
    > :is(.toolbarbutton-icon, .toolbarbutton-badge-stack) {
    margin-top: var(--space-above-tabbar);
}

:root[inFullscreen] #toolbar-menubar:not([inactive]) > .titlebar-buttonbox-container {
    display: none !important;
}

/* when drag space is enabled */
#TabsToolbar > .toolbar-items {
    padding-top: 0 !important;
}

:root:not([chromehidden~="menubar"], [inFullscreen="true"])
    #toolbar-menubar:not([autohide="true"])
    ~ #TabsToolbar
    .titlebar-spacer[type="post-tabs"] {
    display: -moz-box !important;
}

:root:not([chromehidden~="menubar"], [inFullscreen="true"])
    #toolbar-menubar:not([autohide="true"])
    + #TabsToolbar
    > .titlebar-buttonbox-container {
    visibility: hidden !important;
    display: -moz-box !important;
}

#toolbar-menubar :is(#menubar-items, #wrapper-menubar-items) {
    position: relative !important;
    top: -3px !important;
    right: 2px !important;
}

#toolbar-menubar #main-menubar > menu {
    border-radius: 2px !important;
    appearance: none !important;
    padding-top: 2px !important;
    padding-bottom: 2px !important;
}

#toolbar-menubar #main-menubar > menu[_moz-menuactive] {
    background-color: var(--toolbarbutton-hover-background) !important;
}

#toolbar-menubar #main-menubar > menu[open] {
    background-color: var(--toolbarbutton-active-background) !important;
}

:root[privatebrowsingmode]
    #toolbar-menubar:not([inactive])
    ~ #TabsToolbar
    .private-browsing-indicator {
    display: block !important;
    right: 94px !important;
    top: calc(9.5px + var(--space-above-tabbar)) !important;
    z-index: 0 !important;
    pointer-events: none !important;
    position: fixed !important;
}

:root[privatebrowsingmode] #toolbar-menubar :is(#menubar-items, #wrapper-menubar-items) {
    right: 39px !important;
}

:root[privatebrowsingmode] #toolbar-menubar:not([inactive]) ~ #TabsToolbar .toolbar-items {
    margin-right: 429px !important;
}

:root[inFullscreen][privatebrowsingmode]
    #toolbar-menubar:not([inactive])
    ~ #TabsToolbar
    .toolbar-items {
    margin-right: 329.5px !important;
}

/* get rid of drop shadow drawn on leftmost visible tab */
.tabbrowser-arrowscrollbox > .arrowscrollbox-overflow-start-indicator {
    visibility: collapse !important;
}

/* tab dragging and dropping icon */
.tab-drop-indicator {
    background-image: url("chrome://global/skin/icons/arrow-up-12.svg") !important;
    -moz-context-properties: fill, fill-opacity, stroke, stroke-opacity !important;
    fill: var(--lwt-toolbarbutton-icon-fill, currentColor) !important;
    margin-bottom: -39px !important;
    z-index: 2500 !important;
    margin-inline-start: -20px !important;
    background-size: 17px !important;
    background-position-x: 1.4px !important;
    width: 20px !important;
    max-width: 20px !important;
}

/* hide the pixel above the tabs in windows */
:root[sizemode="normal"][tabsintitlebar] {
    border-top: none !important;
}

#toolbar-menubar:not([inactive]) ~ #TabsToolbar #TabsToolbar-customization-target::before {
    position: relative !important;
    display: block !important;
    content: "" !important;
    pointer-events: none !important;
    box-shadow: 7px 0px 7px 0px rgba(0, 0, 0, 0.1) !important;
    background-color: transparent !important;
    width: 20px !important;
    margin-left: -20px !important;
    height: 46px !important;
    margin-block: -8px !important;
    z-index: 11 !important;
}

#tabbrowser-tabs::after {
    position: relative !important;
    display: block !important;
    content: "" !important;
    pointer-events: none !important;
    box-shadow: -7px 0px 7px 0px rgba(0, 0, 0, 0.1) !important;
    background-color: transparent !important;
    width: 20px !important;
    margin-right: -20px !important;
    height: 46px !important;
    margin-block: -8px !important;
    z-index: 11 !important;
}

#TabsToolbar {
    /* background-image: linear-gradient(180deg, hsl(231, 49%, 11%), hsl(233, 55%, 8%)) !important; */
    background-image: radial-gradient(
        circle at 100% 0%,
        hsl(231, 49%, 11%),
        hsl(233, 55%, 8%) 140px
    ) !important;
    background-color: var(--lwt-accent-color) !important;
}

#new-tab-button,
#tabs-newtab-button {
    padding-left: 4px !important;
    z-index: 1 !important;
    position: relative !important;
}

/* non-overflowing tabs shouldn't draw shadows on new tab button since overflowing tabs don't draw shadows on the special new tab button */
#tabbrowser-tabs:not([overflow]) #tabs-newtab-button {
    z-index: 5 !important;
}

:root:not([sizemode="normal"]) .arrowscrollbox-overflow-end-indicator,
:root:not([sizemode="normal"])
    .tabbrowser-arrowscrollbox
    > .arrowscrollbox-overflow-start-indicator {
    visibility: collapse !important;
}

:is(tabbrowser, #TabsToolbar) toolbarbutton[class^="scrollbutton"] {
    display: none !important;
}

/* hide tab separators */
.tabbrowser-tab::after,
.tabbrowser-tab::before {
    opacity: 0 !important;
    border-image: unset !important;
    border-image-slice: unset !important;
    width: unset !important;
}

.tabbrowser-tab::after,
.tabbrowser-tab::before {
    border-left: none !important;
}

#tabbrowser-tabs[movingtab] > .tabbrowser-tab[beforeselected]:not([last-visible-tab])::after,
.tabbrowser-tab:not([selected], [afterselected-visible], [afterhovered], [first-visible-tab], :hover)::before,
#tabbrowser-tabs:not([overflow])
    > .tabbrowser-tab[last-visible-tab]:not([selected], [beforehovered], :hover)::after {
    content: unset !important;
    display: unset !important;
}

/* macOS style window controls */
:is(.titlebar-buttonbox, #window-controls):-moz-window-inactive > toolbarbutton:not(:hover) {
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><circle transform='rotate(-86.438 56.99 56.99) scale(1.00003)' cx='57' cy='57' fill-rule='evenodd' clip-rule='evenodd' fill='hsl(227, 19%, 48%)' r='57'/></svg>") !important;
}

:is(.titlebar-buttonbox, #window-controls) .toolbarbutton-icon {
    opacity: 1 !important;
}

.titlebar-button > .toolbarbutton-icon,
#window-controls > toolbarbutton > .toolbarbutton-icon {
    width: 15.3px !important;
    height: 15.3px !important;
    stroke: none !important;
}

.titlebar-buttonbox {
    margin-right: 7px !important;
    margin-left: 0px !important;
}

#window-controls {
    margin-right: 6px !important;
    margin-left: 8px !important;
}

.titlebar-min,
#minimize-button {
    padding: 0px !important;
    padding-left: 7px !important;
    padding-right: 7px !important;
    margin-left: 0px !important;
    margin-right: 0px !important;
    margin-top: 0px !important;
    margin-bottom: 0px !important;
    background-color: transparent !important;
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><circle transform='rotate(-85.269 56.99 56.99)' cx='57' cy='57' fill-rule='evenodd' clip-rule='evenodd' fill='%23fac536' r='57'/></svg>") !important;
    grid-column: 2 !important;
}

/* 
.titlebar-min>.toolbarbutton-icon,
#minimize-button>.toolbarbutton-icon {
    filter: brightness(1.2) saturate(0.9) contrast(1.1) !important;
}
*/

.titlebar-min:hover,
#minimize-button:hover {
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><circle transform='rotate(-85.269 56.99 56.99)' cx='57' cy='57' fill-rule='evenodd' clip-rule='evenodd' fill='%23fac536' r='57'/><path d='M88.2 50.2H25.8c-3.7 0-6.8 3-6.8 6.8 0 3.7 3 6.8 6.8 6.8h62.4c3.7 0 6.8-3 6.8-6.8-.1-3.7-3.1-6.8-6.8-6.8z' fill-rule='evenodd' clip-rule='evenodd' fill='%239d6525'/></svg>") !important;
}

/* 
.titlebar-min:not(:-moz-window-inactive),
#minimize-button:not(:-moz-window-inactive),
.titlebar-min:-moz-window-inactive:hover,
#minimize-button:-moz-window-inactive:hover {
    filter: brightness(1.05) contrast(1.15) saturate(1.2) !important;
    filter: brightness(1.05) saturate(1.2) !important;
}
*/

.titlebar-max,
.titlebar-restore,
#restore-button {
    padding: 0px !important;
    padding-left: 7px !important;
    padding-right: 7px !important;
    margin-left: 0px !important;
    margin-right: 0px !important;
    margin-top: 0px !important;
    margin-bottom: 0px !important;
    background-color: transparent !important;
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><path d='M57 0C25.5 0 0 25.5 0 57s25.5 57 57 57 57-25.5 57-57S88.5 0 57 0z' fill-rule='evenodd' clip-rule='evenodd' fill='%2339ea49'/></svg>") !important;
    grid-column: 1 !important;
    -moz-box-ordinal-group: 0 !important;
}

.titlebar-max:hover {
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><path d='M57 0C25.5 0 0 25.5 0 57s25.5 57 57 57 57-25.5 57-57S88.5 0 57 0z' fill-rule='evenodd' clip-rule='evenodd' fill='%2339ea49'/><path d='M27.7 47v30.9c0 4.7 3.9 8.6 8.6 8.6h30.9c1.8 0 2.7-2.2 1.4-3.4L31.1 45.6c-1.2-1.3-3.4-.4-3.4 1.4zm50.4-18.4H47.3c-1.8 0-2.7 2.2-1.4 3.4l37.4 37.4c1.3 1.3 3.4.4 3.4-1.4V37.2c0-4.8-3.9-8.6-8.6-8.6z' fill='%230b7407'/></svg>") !important;
}

:root[sizemode="maximized"] .titlebar-max:hover,
.titlebar-restore:hover,
#restore-button:hover {
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><path d='M57 0C25.5 0 0 25.5 0 57s25.5 57 57 57 57-25.5 57-57S88.5 0 57 0z' fill-rule='evenodd' clip-rule='evenodd' fill='%2339ea49'/><path d='M77.5 27.1H37.4c-6.3 0-11.4 5.1-11.4 11.4v39c0 6.3 5.1 11.4 11.4 11.4h40.1c6.3 0 11.4-5.1 11.4-11.4v-39c0-6.3-5.1-11.4-11.4-11.4zm-5.4 48.4H42.9c-1.6 0-2.9-1.3-2.9-2.9V43.4c0-1.6 1.3-2.9 2.9-2.9h29.2c1.6 0 2.9 1.3 2.9 2.9v29.2c0 1.6-1.3 2.9-2.9 2.9z' fill='%230b7407'/></svg>") !important;
}

.titlebar-close,
#close-button {
    padding: 0px !important;
    padding-left: 7px !important;
    padding-right: 7px !important;
    margin-left: 0px !important;
    margin-right: 0px !important;
    margin-top: 0px !important;
    margin-bottom: 0px !important;
    background-color: transparent !important;
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><path d='M57 0C25.5 0 0 25.5 0 57s25.5 57 57 57 57-25.5 57-57S88.5 0 57 0z' fill-rule='evenodd' clip-rule='evenodd' fill='%23f25056'/></svg>") !important;
    grid-column: 3 !important;
}

.titlebar-close:hover,
#close-button:hover {
    list-style-image: url("data:image/svg+xml;utf8,<svg version='1.1' id='prefix__prefix__prefix__prefix__prefix__prefix__svg2' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 114 114' xml:space='preserve'><style type='text/css'>.prefix__prefix__prefix__prefix__prefix__prefix__st1{fill-rule:evenodd;clip-rule:evenodd;fill:%239f1d2b}</style><path d='M57 0C25.5 0 0 25.5 0 57s25.5 57 57 57 57-25.5 57-57S88.5 0 57 0z' fill-rule='evenodd' clip-rule='evenodd' fill='%23f25056'/><path class='prefix__prefix__prefix__prefix__prefix__prefix__st1' d='M83.8 74.3L39.7 30.2c-2.6-2.6-6.9-2.6-9.6 0-2.6 2.6-2.6 6.9 0 9.6l44.1 44.1c2.6 2.6 6.9 2.6 9.6 0 2.7-2.7 2.7-7 0-9.6z'/><path class='prefix__prefix__prefix__prefix__prefix__prefix__st1' d='M39.7 83.8l44.1-44.1c2.6-2.6 2.6-6.9 0-9.6-2.6-2.6-6.9-2.6-9.6 0l-44 44.2c-2.6 2.6-2.6 6.9 0 9.6 2.6 2.6 6.9 2.6 9.5-.1z'/></svg>") !important;
}

/* private browsing indicator next to window controls */
.accessibility-indicator,
.private-browsing-indicator {
    width: 16px !important;
    height: 16px !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
}

.private-browsing-indicator {
    background-image: url("chrome://browser/skin/privateBrowsing.svg") !important;
}

.accessibility-indicator {
    background-image: url("chrome://devtools/skin/images/tool-accessibility.svg") !important;
}

/* all tabs button popup */
.all-tabs-item {
    border-radius: var(--arrowpanel-menuitem-border-radius);
    box-shadow: none !important;
    margin-inline: 4px;
    min-height: 28px;
    -moz-box-align: center;
}

panelview .all-tabs-button:not([disabled], [open]):focus {
    background: none !important;
}

#allTabsMenu-allTabsViewTabs {
    margin: var(--panel-subview-body-padding) !important;
    padding-block-start: 0 !important;
}

.all-tabs-item[selected],
.all-tabs-item[multiselected],
.all-tabs-item[usercontextid]:is(:hover, [_moz-menuactive]) {
    background-image: linear-gradient(
        to right,
        var(--main-stripe-color) 0,
        var(--main-stripe-color) 4px,
        transparent 4px
    ) !important;
}

.all-tabs-item[selected] {
    font-weight: normal !important;
    background-color: var(--arrowpanel-dimmed-further) !important;
    --main-stripe-color: var(--arrowpanel-dimmed-even-further);
}

.all-tabs-item[usercontextid]:not([multiselected]) {
    --main-stripe-color: var(--identity-tab-color);
}

.all-tabs-item[multiselected] {
    --main-stripe-color: var(--multiselected-color);
}

.all-tabs-item[multiselected]:not([selected]),
.all-tabs-item:not([selected]):is(:hover, :focus-within, [_moz-menuactive]) {
    background-color: var(--arrowpanel-dimmed) !important;
}

.all-tabs-item[multiselected]:not([selected]):is(:hover, [_moz-menuactive]) {
    background-color: var(--arrowpanel-dimmed-further) !important;
}

.all-tabs-item:not([selected]):is(:hover, [_moz-menuactive]):active {
    background-color: var(--arrowpanel-dimmed-further) !important;
}

.all-tabs-item[pending] {
    opacity: 0.6;
}

.all-tabs-item .all-tabs-secondary-button,
.all-tabs-item .all-tabs-secondary-button:focus:not([disabled]) {
    max-width: 18px;
    max-height: 18px;
    padding: 2px 2px 2px 1px !important;
    border-radius: 100% !important;
    color: white !important;
    background-color: transparent !important;
    opacity: 0.7 !important;
    min-height: 0 !important;
    min-width: 0 !important;
    margin-inline: 6px 10px !important;
}

.all-tabs-item .all-tabs-secondary-button > label:empty {
    display: none !important;
}

.all-tabs-item .all-tabs-secondary-button:is(:hover, :focus):not([disabled]) {
    background-color: var(--arrowpanel-dimmed) !important;
    opacity: 1 !important;
    color: white !important;
}

.all-tabs-item .all-tabs-secondary-button:hover:active:not([disabled]) {
    background-color: var(--arrowpanel-dimmed-further) !important;
}
